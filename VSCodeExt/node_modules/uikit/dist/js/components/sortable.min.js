/*! UIkit 3.3.1 | http://www.getuikit.com | (c) 2014 - 2019 YOOtheme | MIT License */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("uikit-util")):"function"==typeof define&&define.amd?define("uikitsortable",["uikit-util"],e):(t=t||self).UIkitSortable=e(t.UIkit.util)}(this,function(h){"use strict";var l,c="uk-animation-target";function d(t,e){var i=h.css(t,"zIndex");return!!h.isVisible(t)&&h.assign({display:"",opacity:e?h.css(t,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:"auto"===i?h.index(t):i},u(t))}function p(t){h.css(t.children,{height:"",left:"",opacity:"",pointerEvents:"",position:"",top:"",width:""}),h.removeClass(t,c),h.css(t,"height","")}function u(t){var e=h.offset(t),i=e.height,s=e.width,n=h.position(t);return{top:n.top,left:n.left,height:i,width:s}}var f,t={mixins:[{connected:function(){h.hasClass(this.$el,this.$name)||h.addClass(this.$el,this.$name)}},{props:{animation:Number},data:{animation:150},computed:{target:function(){return this.$el}},methods:{animate:function(t){var s=this;!function(){if(l)return;(l=h.append(document.head,"<style>").sheet).insertRule("."+c+" > * {\n            margin-top: 0 !important;\n            transform: none !important;\n        }",0)}();var n=h.children(this.target),o=n.map(function(t){return d(t,!0)}),e=h.height(this.target),i=window.pageYOffset;t(),h.Transition.cancel(this.target),n.forEach(h.Transition.cancel),p(this.target),this.$update(this.target),h.fastdom.flush();var r=h.height(this.target),a=(n=n.concat(h.children(this.target).filter(function(t){return!h.includes(n,t)}))).map(function(t,e){return!!(t.parentNode&&e in o)&&(o[e]?h.isVisible(t)?u(t):{opacity:0}:{opacity:h.isVisible(t)?1:0})});return o=a.map(function(t,e){var i=n[e].parentNode===s.target&&(o[e]||d(n[e]));if(i)if(t){if(!("opacity"in t)){i.opacity%1?t.opacity=1:delete i.opacity}}else delete i.opacity;return i}),h.addClass(this.target,c),n.forEach(function(t,e){return o[e]&&h.css(t,o[e])}),h.css(this.target,"height",e),h.scrollTop(window,i),h.Promise.all(n.map(function(t,e){return o[e]&&a[e]?h.Transition.start(t,a[e],s.animation,"ease"):h.Promise.resolve()}).concat(h.Transition.start(this.target,{height:r},this.animation,"ease"))).then(function(){n.forEach(function(t,e){return h.css(t,{display:0===a[e].opacity?"none":"",zIndex:""})}),p(s.target),s.$update(s.target),h.fastdom.flush()},h.noop)}}}],props:{group:String,threshold:Number,clsItem:String,clsPlaceholder:String,clsDrag:String,clsDragState:String,clsBase:String,clsNoDrag:String,clsEmpty:String,clsCustom:String,handle:String},data:{group:!1,threshold:5,clsItem:"uk-sortable-item",clsPlaceholder:"uk-sortable-placeholder",clsDrag:"uk-sortable-drag",clsDragState:"uk-drag",clsBase:"uk-sortable",clsNoDrag:"uk-sortable-nodrag",clsEmpty:"uk-sortable-empty",clsCustom:"",handle:!1,pos:{}},created:function(){var i=this;["init","start","move","end"].forEach(function(t){var e=i[t];i[t]=function(t){i.scrollY=window.pageYOffset,h.assign(i.pos,h.getEventPos(t,"page")),e(t)}})},events:{name:h.pointerDown,passive:!1,handler:"init"},update:{write:function(){if(this.clsEmpty&&h.toggleClass(this.$el,this.clsEmpty,h.isEmpty(this.$el.children)),h.css(this.handle?h.$$(this.handle,this.$el):this.$el.children,{touchAction:"none",userSelect:"none"}),this.drag){var t=h.offset(window),e=t.right,i=t.bottom;h.offset(this.drag,{top:h.clamp(this.pos.y+this.origin.top,0,i-this.drag.offsetHeight),left:h.clamp(this.pos.x+this.origin.left,0,e-this.drag.offsetWidth)})}}},methods:{init:function(t){var e=t.target,i=t.button,s=t.defaultPrevented,n=h.children(this.$el).filter(function(t){return h.within(e,t)})[0];!n||s||0<i||h.isInput(e)||h.within(e,"."+this.clsNoDrag)||this.handle&&!h.within(e,this.handle)||(t.preventDefault(),this.touched=[this],this.placeholder=n,this.origin=h.assign({target:e,index:h.index(n)},this.pos),h.on(document,h.pointerMove,this.move),h.on(document,h.pointerUp,this.end),h.on(window,"scroll",this.scroll),this.threshold||this.start(t))},start:function(t){var e,i,s;this.drag=(e=this.$container,i=this.placeholder,s=h.append(e,i.outerHTML.replace(/(^<)li|li(\/>$)/g,"$1div$2")),h.css(s,h.assign({boxSizing:"border-box",width:i.offsetWidth,height:i.offsetHeight,overflow:"hidden"},h.css(i,["paddingLeft","paddingRight","paddingTop","paddingBottom"]))),h.height(s.firstElementChild,h.height(i.firstElementChild)),s);var n,o=h.offset(this.placeholder),r=o.left,a=o.top;h.assign(this.origin,{left:r-this.pos.x,top:a-this.pos.y}),h.addClass(this.drag,this.clsDrag,this.clsCustom),h.addClass(this.placeholder,this.clsPlaceholder),h.addClass(this.$el.children,this.clsItem),h.addClass(document.documentElement,this.clsDragState),h.trigger(this.$el,"start",[this,this.placeholder]),n=this.pos,f=setInterval(function(){var t=n.x,a=n.y;h.scrollParents(document.elementFromPoint(t-window.pageXOffset,a-window.pageYOffset)).some(function(t){var e=t.scrollTop,i=t.scrollHeight,s=h.offset(h.getViewport(t)),n=s.top,o=s.bottom,r=s.height;if(n<a&&a<n+30)e-=5;else{if(!(a<o&&o-30<a))return;e+=5}if(0<e&&e<i-r)return h.scrollTop(t,e),!0})},15),this.move(t)},move:function(t){if(this.drag){this.$update();var e="mousemove"===t.type?t.target:document.elementFromPoint(this.pos.x-window.pageXOffset,this.pos.y-window.pageYOffset),i=this.getSortable(e),s=this.getSortable(this.placeholder),n=i!==s;if(i&&!h.within(e,this.placeholder)&&(!n||i.group&&i.group===s.group)){if(e=i.$el===e.parentNode&&e||h.children(i.$el).filter(function(t){return h.within(e,t)})[0],n)s.remove(this.placeholder);else if(!e)return;i.insert(this.placeholder,e),h.includes(this.touched,i)||this.touched.push(i)}}else(Math.abs(this.pos.x-this.origin.x)>this.threshold||Math.abs(this.pos.y-this.origin.y)>this.threshold)&&this.start(t)},end:function(t){if(h.off(document,h.pointerMove,this.move),h.off(document,h.pointerUp,this.end),h.off(window,"scroll",this.scroll),this.drag){clearInterval(f);var e=this.getSortable(this.placeholder);this===e?this.origin.index!==h.index(this.placeholder)&&h.trigger(this.$el,"moved",[this,this.placeholder]):(h.trigger(e.$el,"added",[e,this.placeholder]),h.trigger(this.$el,"removed",[this,this.placeholder])),h.trigger(this.$el,"stop",[this,this.placeholder]),h.remove(this.drag),this.drag=null;var i=this.touched.map(function(t){return t.clsPlaceholder+" "+t.clsItem}).join(" ");this.touched.forEach(function(t){return h.removeClass(t.$el.children,i)}),h.removeClass(document.documentElement,this.clsDragState)}else"touchend"===t.type&&t.target.click()},scroll:function(){var t=window.pageYOffset;t!==this.scrollY&&(this.pos.y+=t-this.scrollY,this.scrollY=t,this.$update())},insert:function(i,s){var n=this;h.addClass(this.$el.children,this.clsItem);function t(){var t,e;s?!h.within(i,n.$el)||(e=s,(t=i).parentNode===e.parentNode&&h.index(t)>h.index(e))?h.before(s,i):h.after(s,i):h.append(n.$el,i)}this.animation?this.animate(t):t()},remove:function(t){h.within(t,this.$el)&&(h.css(this.handle?h.$$(this.handle,t):t,{touchAction:"",userSelect:""}),this.animation?this.animate(function(){return h.remove(t)}):h.remove(t))},getSortable:function(t){return t&&(this.$getComponent(t,"sortable")||this.getSortable(t.parentNode))}}};return"undefined"!=typeof window&&window.UIkit&&window.UIkit.component("sortable",t),t});