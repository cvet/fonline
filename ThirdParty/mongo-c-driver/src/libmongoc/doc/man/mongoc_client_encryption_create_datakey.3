.\" Man page generated from reStructuredText.
.
.TH "MONGOC_CLIENT_ENCRYPTION_CREATE_DATAKEY" "3" "Nov 03, 2021" "1.19.2" "libmongoc"
.SH NAME
mongoc_client_encryption_create_datakey \- mongoc_client_encryption_create_datakey()
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
bool
mongoc_client_encryption_create_datakey (
   mongoc_client_encryption_t *client_encryption,
   const char *kms_provider,
   mongoc_client_encryption_datakey_opts_t *opts,
   bson_value_t *keyid,
   bson_error_t *error);
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Creates a new key document in the key vault collection and sets \fBkeyid\fP to the UUID of the
newly created key if \fBkeyid\fP is not NULL. The new key can be used to configure automatic encryption (see \fBmongoc_client_enable_auto_encryption()\fP and \fBmongoc_client_pool_enable_auto_encryption()\fP) or for explicit encryption (see \fBmongoc_client_encryption_encrypt()\fP).
.sp
The created key document is inserted into the key vault collection (identified via \fBmongoc_client_encryption_opts_set_keyvault_namespace()\fP) with majority write concern.
.sp
\fBkeyid\fP is always initialized (even on error). Caller must call \fI\%bson_value_destroy()\fP on \fBkeyid\fP to free.
.SH PARAMETERS
.INDENT 0.0
.IP \(bu 2
\fBclient_encryption\fP: A \fBmongoc_client_encryption_t\fP\&.
.IP \(bu 2
\fBkms_provider\fP: A string identifying the Key Management Service (KMS) provider used to encrypt the datakey (e.g. "aws" or "local").
.IP \(bu 2
\fBopts\fP: A \fBmongoc_client_encryption_datakey_opts_t\fP
.IP \(bu 2
\fBkeyid\fP: The resulting UUID key ID of the newly created key.
.IP \(bu 2
\fBerror\fP: A \fI\%bson_error_t\fP
.UNINDENT
.SH RETURNS
.sp
Returns \fBtrue\fP if successful. Returns \fBfalse\fP and sets \fBerror\fP otherwise.
.sp
\fBSEE ALSO:\fP
.INDENT 0.0
.INDENT 3.5
.nf
\fBmongoc_client_encryption_datakey_opts_t\fP
.fi
.sp
.UNINDENT
.UNINDENT
.SH AUTHOR
MongoDB, Inc
.SH COPYRIGHT
2017-present, MongoDB, Inc
.\" Generated by docutils manpage writer.
.
