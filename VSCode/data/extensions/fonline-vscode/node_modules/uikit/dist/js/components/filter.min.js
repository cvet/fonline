/*! UIkit 3.3.1 | http://www.getuikit.com | (c) 2014 - 2019 YOOtheme | MIT License */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("uikit-util")):"function"==typeof define&&define.amd?define("uikitfilter",["uikit-util"],e):(t=t||self).UIkitFilter=e(t.UIkit.util)}(this,function(d){"use strict";var c,u="uk-animation-target";function f(t,e){var i=d.css(t,"zIndex");return!!d.isVisible(t)&&d.assign({display:"",opacity:e?d.css(t,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:"auto"===i?d.index(t):i},h(t))}function l(t){d.css(t.children,{height:"",left:"",opacity:"",pointerEvents:"",position:"",top:"",width:""}),d.removeClass(t,u),d.css(t,"height","")}function h(t){var e=d.offset(t),i=e.height,n=e.width,r=d.position(t);return{top:r.top,left:r.left,height:i,width:n}}var t={mixins:[{props:{animation:Number},data:{animation:150},computed:{target:function(){return this.$el}},methods:{animate:function(t){var n=this;!function(){if(c)return;(c=d.append(document.head,"<style>").sheet).insertRule("."+u+" > * {\n            margin-top: 0 !important;\n            transform: none !important;\n        }",0)}();var r=d.children(this.target),a=r.map(function(t){return f(t,!0)}),e=d.height(this.target),i=window.pageYOffset;t(),d.Transition.cancel(this.target),r.forEach(d.Transition.cancel),l(this.target),this.$update(this.target),d.fastdom.flush();var o=d.height(this.target),s=(r=r.concat(d.children(this.target).filter(function(t){return!d.includes(r,t)}))).map(function(t,e){return!!(t.parentNode&&e in a)&&(a[e]?d.isVisible(t)?h(t):{opacity:0}:{opacity:d.isVisible(t)?1:0})});return a=s.map(function(t,e){var i=r[e].parentNode===n.target&&(a[e]||f(r[e]));if(i)if(t){if(!("opacity"in t)){i.opacity%1?t.opacity=1:delete i.opacity}}else delete i.opacity;return i}),d.addClass(this.target,u),r.forEach(function(t,e){return a[e]&&d.css(t,a[e])}),d.css(this.target,"height",e),d.scrollTop(window,i),d.Promise.all(r.map(function(t,e){return a[e]&&s[e]?d.Transition.start(t,s[e],n.animation,"ease"):d.Promise.resolve()}).concat(d.Transition.start(this.target,{height:o},this.animation,"ease"))).then(function(){r.forEach(function(t,e){return d.css(t,{display:0===s[e].opacity?"none":"",zIndex:""})}),l(n.target),n.$update(n.target),d.fastdom.flush()},d.noop)}}}],args:"target",props:{target:Boolean,selActive:Boolean},data:{target:null,selActive:!1,attrItem:"uk-filter-control",cls:"uk-active",animation:250},computed:{toggles:{get:function(t,e){t.attrItem;return d.$$("["+this.attrItem+"],[data-"+this.attrItem+"]",e)},watch:function(){var e=this;if(this.updateState(),!1!==this.selActive){var i=d.$$(this.selActive,this.$el);this.toggles.forEach(function(t){return d.toggleClass(t,e.cls,d.includes(i,t))})}},immediate:!0},target:function(t,e){var i=t.target;return d.$(i,e)},children:{get:function(){return d.children(this.target)},watch:function(t,e){var i,n;n=e,(i=t).length===n.length&&i.every(function(t){return~n.indexOf(t)})||this.updateState()}}},events:[{name:"click",delegate:function(){return"["+this.attrItem+"],[data-"+this.attrItem+"]"},handler:function(t){t.preventDefault(),this.apply(t.current)}}],methods:{apply:function(t){this.setState(n(t,this.attrItem,this.getState()))},getState:function(){var i=this;return this.toggles.filter(function(t){return d.hasClass(t,i.cls)}).reduce(function(t,e){return n(e,i.attrItem,t)},{filter:{"":""},sort:[]})},setState:function(f,t){var l=this;void 0===t&&(t=!0),f=d.assign({filter:{"":""},sort:[]},f),d.trigger(this.$el,"beforeFilter",[this,f]);var h=this.children;this.toggles.forEach(function(t){return d.toggleClass(t,l.cls,!!function(t,e,i){var n=i.filter;void 0===n&&(n={"":""});var r=i.sort,a=r[0],o=r[1],s=p(t,e),c=s.filter;void 0===c&&(c="");var u=s.group;void 0===u&&(u="");var f=s.sort,l=s.order;void 0===l&&(l="asc");return d.isUndefined(f)?u in n&&c===n[u]||!c&&u&&!(u in n)&&!n[""]:a===f&&o===l}(t,l.attrItem,f))});function e(){var t,e,i=(t=f.filter,e="",d.each(t,function(t){return e+=t||""}),e);h.forEach(function(t){return d.css(t,"display",i&&!d.matches(t,i)?"none":"")});var n,r,a,o=f.sort,s=o[0],c=o[1];if(s){var u=(n=h,r=s,a=c,d.assign([],n).sort(function(t,e){return d.data(t,r).localeCompare(d.data(e,r),void 0,{numeric:!0})*("asc"===a||-1)}));d.isEqual(u,h)||u.forEach(function(t){return d.append(l.target,t)})}}t?this.animate(e).then(function(){return d.trigger(l.$el,"afterFilter",[l])}):(e(),d.trigger(this.$el,"afterFilter",[this]))},updateState:function(){var t=this;d.fastdom.write(function(){return t.setState(t.getState(),!1)})}}};function p(t,e){return d.parseOptions(d.data(t,e),["filter"])}function n(t,e,i){var n=p(t,e),r=n.filter,a=n.group,o=n.sort,s=n.order;return void 0===s&&(s="asc"),(r||d.isUndefined(o))&&(a?r?(delete i.filter[""],i.filter[a]=r):(delete i.filter[a],(d.isEmpty(i.filter)||""in i.filter)&&(i.filter={"":r||""})):i.filter={"":r||""}),d.isUndefined(o)||(i.sort=[o,s]),i}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.component("filter",t),t});